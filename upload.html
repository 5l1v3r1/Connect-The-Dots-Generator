<html>

    <head>
	<script
	    src="https://code.jquery.com/jquery-3.2.1.min.js"
	    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	    crossorigin="anonymous"></script>
    </head>

    <body>
	<div id="userActions">
	    <input type="file" id="fileUpload">
	</div>
	<div id='container'></div>
    </body>

    <script>
     // https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding 
     function b64DecodeUnicode(str) {
	 // Going backwards: from bytestream, to percent-encoding, to original string.
	 return decodeURIComponent(atob(str).split('').map(function(c) {
	     return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
	 }).join(''));
     }
     
     function setImage(imageSrc) {
	 imageSrc = imageSrc.replace('data:image/svg+xml;base64,', '');
	 imageSrc = b64DecodeUnicode(imageSrc);
	 document.getElementById("container").innerHTML = imageSrc;
     }
     
     // File upload
     /* modified from https://codepen.io/doughensel/pen/zGMmop */
     function runUpload( file ) {
	 // http://stackoverflow.com/questions/12570834/how-to-preview-image-get-file-size-image-height-and-width-before-upload
	 if( file.type === 'image/svg+xml'  ){
	     var reader = new FileReader(), image = new Image();
	     reader.readAsDataURL( file );
	     console.log('reading image...');
	     reader.onload = function( _file ){
		 console.log('setting image...');
		 setImage(_file.target.result);
	     } // END reader.onload()
	 } // END test if file.type === image
     }
     if( window.FileReader ){
	 //Bind the input[type="file"] to the function runUpload()
	 $('#fileUpload').on('change', function(){ runUpload( this.files[0] ); });
     }else{
	 // Report error message if FileReader is unavilable
	 var p   = document.createElement( 'p' ),
	     msg = document.createTextNode( 'Sorry, your browser does not support FileReader.' );
	 p.className = 'error';
	 p.appendChild( msg );
	 $('#userActions').el.innerHTML = '';
	 $('#userActions').el.appendChild( p );
     }
    </script>

</html>
